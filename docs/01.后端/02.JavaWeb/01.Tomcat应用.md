---
title: Tomcat
author: 柏竹
permalink: /backend/0y9sdx
date: 2020-02-18 00:00:00
categories: 
  - 后端
  - JavaWeb
tags: 
  - Tomcat
---


# Tomcat

Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，轻量级应用服务器

## Tomcat下载

[点击网站](https://tomcat.apache.org/) 

1. 下载后解压路径要纯英文
2. 打开 根路径下的 `bin/startup.bat` 文件
3. 打开 浏览器 进入地址：`http://localhost:8080/` 
   浏览器进入的地址不是空，表示成功
   优化使用，需要cmd方便应用
4. 环境配置 **新建 系统变量**（JDK配置）
   变量名：`CATALINA_HOME` 
   变量值：`C:\Program Files\Java\apache-tomcat-9.0.13` (自己解压的路径)
5. 环境配置 更变 系统变量 （指令应用）
   变量名：`Path` 
   新增值：`%CATALINA_HOME%\bin` 
6. 添加服务 cmd执行指令：`service install` / `service install Tomcat9` (注意版本)
7. 服务配置 “Apache Tomcat ...”（设为 自动启动/手动 作为Tomcat服务的入口）

<div style="background:rgba(245, 108, 108,0.6);border:1px solid rgba(1, 1, 1,0.2);border-radius:8px;padding:1px 12px;"><p style="font-size:20px">
<p style="font-size:20px">
<b>可能要解决的问题:  </b> 
    <ul>
        <li>启动tomcat服务</li>
        <li>
            Window功能 服务启动：打开 控制面板 -> 程序安装与卸载 -> window功能启动
            <ul>
                <li>启动 ==Internet Information Services== 下的所有子功能</li>
            </ul>
        </li>
        <li>Tomcat 中文乱码：修改以下配置文件中的 编码集</li>
        <li>
            <ul>
                <li>`server.xml` 在配置端口的标签中 添加属性：==URIEncoding="UTF-8"==</li>
                <li>`logging.properties` 在属性 `java.util.logging.ConsoleHandler.encoding` 中设置值为 ==GBK== </li>
            </ul>
        </li>
        <li>startup.sh启动闪退：配置Java环境变量和Tomcat环境变量</li>
    </ul>
</p> 
</div>

## Tomcat目录

- **bin：** 存二进制可执行文件，指令操作控制
- **conf：** 配置文件应用，有四个
  - **server.xml：** 配置整个服务器信息
    - **tomcat-users.xml：** 存储用户文件，账号密码等
  - **web.xml：** 部署描述 的文件 ，如 MIME => text/html
  - **context.xml：** 所有应用的统一配置（勿改）
- **lib：** 类库，存储jar文件，用于添加依赖
- **logs：** 日志文件
- **temp：** 临时存放文件夹（缓存），停止Tomcat删除！！
- **webapps：** 存放web项目的目录，每个文件夹都是项目（也有tomcat自带的）
- **work：** 运行时生成的文件，每次运行都会重新生成（重复覆盖）
- **LICENSE：** 许可证
- **NOTICE：** 说明文件

## Tomcat配置

### IDEA整合

**添加tomcat**

![](https://image.bozhu12.cc/myblog/JavaWeb/01.png)

![](https://image.bozhu12.cc/myblog/JavaWeb/02.png)

**引入路径**

![](https://image.bozhu12.cc/myblog/JavaWeb/03.png)

**添加 war exploded应用** 

![](https://image.bozhu12.cc/myblog/JavaWeb/04.png)



### JavaWeb项目创建

**创建项目**，如果没有JavaWeb

![](https://image.bozhu12.cc/myblog/JavaWeb/05.png)

**可在项目设置里添加框架**

![](https://image.bozhu12.cc/myblog/JavaWeb/06.png)

![](https://image.bozhu12.cc/myblog/JavaWeb/07.png) 

在 WEB-INF 目录下 新建 classes 和 lib 文件夹 用于配置 jar包 和 classes包

![](https://image.bozhu12.cc/myblog/JavaWeb/08.png)

配置路径 classes包

![](https://image.bozhu12.cc/myblog/JavaWeb/09.png)

![](https://image.bozhu12.cc/myblog/JavaWeb/10.png)

配置依赖 jar包

![](https://image.bozhu12.cc/myblog/JavaWeb/11.png)

![](https://image.bozhu12.cc/myblog/JavaWeb/12.png)

![](https://image.bozhu12.cc/myblog/JavaWeb/13.png)

![](https://image.bozhu12.cc/myblog/JavaWeb/14.png)

### 配置端口号

在根路径 找 `../conf/server.xml` 文件（69行左右）

```html
<!-- 修改 port属性 的值即可 -->
<Connector port="8888" protocol="HTTP/1.1" connectionTimeout="20000"
 redirectPort="8443" />
```

## Tomcat项目管理

添加管理员信息

修改 `../conf/tomcat-users.xml` 文件 
将一下代码添加至 `<tomcat-users>` 标签

```html
<role rolename="manager-gui"/>
<user username="tomcat" password="tomcat" roles="manager-gui"/>
```

**rolename/roles：** 权限
**username：** 用户名
**password：** 密码