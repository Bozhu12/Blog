---
title: SpringBoot部署
author: 
  name: 柏竹
  link: https://github.com/Bozhu12
permalink: /backend/40kn91
date: 2023-06-10 00:00:00
categories: 
  - 后端
  - Web框架
tags: 
  - Java
  - Web开发
titleTag: 原创
---

## Jar打包

大致流程

1. jdk安装 , 并配置
2. Maven打包项目 , 上传服务器
3. 运行jar项目

> SpringBoot内置集成Tomcat , 无需安装即可应用

**项目打包**

Maven -> 双击package , 加载完会在 /target(缓存路径) 上看到 .jar 文件 , 在Liunx系统里运行即可

**运行jar包项目**

```shell
nohup java -jar shop-0.0.1-SNAPSHOT.jar > logName.log 2>&1 &
```

**指令说明**

- ==nohup java -jar shop-0.0.1-SNAPSHOT.jar== 运行项目 , 不挂断运行
- ==Log.log 2>&1== 表示将`stdout`和`stderr`合并后重定向到`log.file`

> 运行后可以看到 一串数值 , 可通过 ==jps==指令 进行查看进程

**关闭进程 :** 

```shell
# 查指定端口 (查8080)
netstat -nlp|grep 8080
# 确定端口的 PID
kill -9 {PID}
```

## Docker打包/群辉挂载

0. jar打包

1. 创建 dorderfile.txt (编辑配置文件) , 保存后取出后缀 .txt

   ```dockerfile
   # Docker image for springboot file run
   # VERSION 0.0.1
   # Author: 
   # 基础镜像使用java
   FROM openjdk:8
   # 作者
   MAINTAINER Sans
   # VOLUME 指定了临时文件目录为/tmp。
   # 其效果是在主机 /var/lib/docker 目录下创建了一个临时文件，并链接到容器的/tmp
   VOLUME /tmp 
   # 将jar包添加到容器中并更名为xx.jar (demo.jar -> test.jar)
   ADD demo.jar test.jar 
   # 运行jar包
   RUN bash -c 'touch /test.jar'
   ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/test.jar"]
   ```

2. 执行镜像打包 (在含有 dockerfild 和 xx.jar 执行以下文件) 

   ```docker
   sudo docker build . -t demo-name:v1.0
   ```

3. 打开docker , 镜像加载即可 (配置按照默认)

4. 反向代理 , 控制面板 -> 登录门户 -> 高级 -> 反向代理服务器
   新增 来源 *:端口 ; 目的 locakhost:本地端口

5. 外部访问即可

## SSL域名认证

SSL能够将该网站变为更安全的网站 , HTTPS独有的协议 

阿里云申请后 : 下载`JKS` 证书类型(里面有 key和password 两个文件)

key放到 `resources`目录 即可

**application文件配置** 

```properties
# 域名 SSL配置
server.ssl.key-store=classpath:8840811_bozhu.free.svipss.top.jks
server.ssl.key-store-password=xxxx
server.ssl.key-store-type=JKS
```

| 属性                          | 值                         |
| ----------------------------- | -------------------------- |
| server.ssl.key-store          | key文件的全名称            |
| server.ssl.key-store-password | 第二个文件夹的内容粘贴出来 |
| server.ssl.key-store-type     | 认证类型 JKS               |

直接访问https接口 , 也可以设置重定向为https

## SSH

先连接OpenWrt 作为代理主机进行操作

OpenWrt SSH访问在

==系统 -> 管理权 -> Dropbear 实例== : 启动网关端口...



群辉SSH 先访问OpenWrt作为代理进行内网访问群辉SSHComponent

