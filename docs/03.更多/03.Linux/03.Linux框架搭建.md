---
title: Linux框架搭建
author: 柏竹
permalink: /other/cbba2
date: 2021-06-07 00:00:00
categories: 
  - 后端
tags: 
  - Linux
---

## 安装 JDK

1. 上传JDK压缩文件，放置 根目录创建的 `mysoft` 文件夹

2. 解压 (解压至当前目录)

   ```sh
   tar -xzvf {file}
   ```

3. 测试jdk安装。进入jdk的bin目录进行验证 (返回版本号表示成功)

   ```sh
   ./java -version 
   ```

   > 注意：在jdk的bin目录下执行java命令，前面要有 `.` 符号

4. 配置环境变量 ，添加变量 `JAVA_HOME`、`PATH`

   ```sh
   vim /etc/profile
   ### 在最下面添加 两个变量 注意jdk的路径
   export JAVA_HOME=/mysoft/jdk1.8.0_11
   export PATH=$PATH:$JAVA_HOME/bin
   ```

   > 注意jdk文件名称

5. 使环境变量生效

   ```sh
   source /etc/profile

6. 测试环境配置 (返回预期的bin目录即可)

   ```sh
   echo $PATH
   ```

7. 在任意路径测试java命令 (返回版本号代表成功)

   ```sh
   java -version
   ```

## 安装 MySQL

#### 5.6 版本

1. 检测是否自带安装MySQL

   ```sh
   yum list installed | grep mysql
   ```

2. 删除系统自带的sql及其依赖 (以防后面冲突)

   ```sh
   yum -y remove mysql-libs.x86_64
   ```

3. 添加rpm源

   ```sh
   wget --no-check-certificate dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm
   ```

4. 安装第一步下载的rpm文件 (出现许可输入`y` 即可

   ```sh
   yum install mysql-community-release-el6-5.noarch.rpm
   ```

5. 查看MySQL是否下载 ，列出所有yum repo文件

   ```sh
   yum repolist enabled | grep mysql
   ```

6. 使用yum安装MySQL （输入3次 `y`  

   ```sh
   yum install mysql-community-server
   ```

7. 启动MySQL服务

   ```sh
   service mysqld start
   ```

8. 查看是否自动启动并启动

   ```sh
   # 查看
   chkconfig --list | grep mysqld
   # 自动启动
   chkconfig mysqld on
   ```

   > 看到3、4、5状态为开或者为 on 则表示成功

9. 修改字符集为UTF-8

   ```sh
   vim /etc/my.cnf
   ### 1. 在 [mysqld] 下面添加：
   character-set-server=utf8
   ### 2. 在末尾 [client] 添加：(client没有自行添加)
   default-character-set=utf8
   ```

10. 重启服务

    ```sh
    service mysqld restart
    ```

11. 修改默认配置 

    ```sh
    mysql_secure_installation
    ```

    > 此步骤可设置密码，root用户密码可自行设置。此处输入内容依次为：`y`、`y`、`n`、`y`、`y`

12. 授权远程登录，通过改表实现

    ```mysql
    # 上号
    mysql -uroot -p
    # 选中库
    >use mysql;
    # 修改表数据
    >update user set host = '%' where user = 'root' and host='localhost';
    # 允许外网访问
    >grant all privileges on *.* to 'root'@'%' identified by 'root' with grant option;
    # 刷新MySQL的系统权限相关表
    >flush privileges;
    ```

> 如果连接还出现异常，请检查 ：
>
> - 授权问题
> - 是否刷新权限表
> - 是否关闭防火墙 或 允许访问

#### 8 版本



## 安装 Tomcat

1. 安装JDK

2. 上传Tomcat压缩包到 根目录的 `mysoft` 文件夹

3. 解压

   ```sh
   tar -xzvf {file}
   ```

4. 进入bin目录启动Tomcat

   ```sh
   sh startup.sh
   ```

5. 关闭防火墙

   ```sh
   # 查看防火墙状态
   systemctl status firewalld
   # 启动防火墙
   systemctl start firewalld
   # 关闭防火墙
   systemctl stop firewalld
   ```

6. 测试访问，

   ```sh
   # 查看IP
   ifconfig
   # 浏览器访问（看见熟系的页面）
   {IP}:8080 
   ```

## 安装 Zookeeper 

1. 安装JDK

2. 上传Zookeeper压缩包到根目录的 `mysoft` 文件夹

3. 解压 解压至根路径usr

   ```sh
   tar -zxvf {file} -C /usr/
   ```

4. 进入 Zookeeper目录 创建 `data` 目录

   ```sh
   mkdir data
   ```

5. 编辑配置 ，进入confg目录 拷贝 `zoo_sample.cfg` 为 zoo.cfg (将默认配置更改并应用)

   ```sh
   # 拷贝应用的配置
   cp zoo_sample.cfg zoo.cfg
   # 编辑配置
   vim zoo.cfg
   ### 更改 dataDir属性 路径 file为解压的文件目录
   dataDir=/usr/{file}/data
   ```

6. Zookeeper 启动&停止&查看

   ```sh
   # Zookeeper 启动
   ./zkServer.sh start
   # Zookeeper 停止
   ./zkServer.sh stop
   # Zookeeper 查看
   ./zkServer.sh status
   ```

   > 需要进入Zookeeper的bin目录且是root权限进行操作

## 安装 Minio

下载 [https://www.minio.org.cn/download.shtml#/linux](https://www.minio.org.cn/download.shtml#/linux) 

1. 新建 minio目录(根目录) `mkdir -p /opt/minio` => `cd /opt/minio`

2. 新建存储路径 `mkdir data`

3. 下载minio `wget https://dl.minio.org.cn/server/minio/release/linux-amd64/minio` 

4. 开放权限 `chmod +x minio` ; `chmod a+rw data` 

5. 创建 配置文件 `vim /opt/minio/conf/minio.conf`

   ```ini
   MINIO_VOLUMES="/opt/minio/data"
   MINIO_ROOT_USER="ruoyi"
   MINIO_ROOT_PASSWORD="ruoyi123123"
   ```

6. 创建service 启动脚本文件 `vim /lib/systemd/system/minio.service` 

   ```bash
   [Unit]
   Description=MinIO
   Documentation=https://docs.min.io
   Wants=network-online.target
   After=network-online.target
   AssertFileIsExecutable=/opt/minio/minio
   
   [Service]
   WorkingDirectory=/opt/minio
   
   EnvironmentFile=/opt/minio/conf/minio.conf
   ExecStartPre=/bin/bash -c "if [ -z \"${MINIO_VOLUMES}\" ]; then echo \"Variable MINIO_VOLUMES not set in /opt/minio/conf/minio.conf\"; exit 1; fi"
   ExecStart=/opt/minio/minio server --console-address "0.0.0.0:9000"  --address "0.0.0.0:9090" $MINIO_VOLUMES
   
   # Let systemd restart this service always
   Restart=always
   
   # Specifies the maximum file descriptor number that can be opened by this process
   LimitNOFILE=65536
   
   # Specifies the maximum number of threads this process can create
   TasksMax=infinity
   
   # Disable timeout logic and wait until process is stopped
   TimeoutStopSec=infinity
   SendSIGKILL=no
   
   [Install]
   WantedBy=multi-user.target
   
   # Built for ${project.name}-${project.version} (${project.name})
   ```

7. 服务控制

   ```bash
   # 每次开机启动
   systemctl enable minio.service
   # 启动服务
   systemctl start minio
   # 停止服务
   systemctl stop minio
   # 查看服务状态
   systemctl status minio
   # ....
   ```

8. 访问即可 `http://<IP地址>:9000` (注意开放端口)

::: warning 注意

- 防火墙打开 9000 , 9090 端口 / 关闭防火墙
- 云服务器 , 开放安全组 9000 , 9090 端口

:::

安装 Redis

